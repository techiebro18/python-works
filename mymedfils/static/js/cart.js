var cartmixin={redirecttocheckout:function(e){0!=e&&this.addtocart(e),location.href=window.location.protocol+"//"+window.location.host+"/checkout"},checkpresenceincart:function(e){return!0===localStorage.hasOwnProperty("cart")&&(cart=JSON.parse(localStorage.cart),cart.filter(function(t){return t.id_code==e}).length>0)},addtocart:function(e){var t=[];addflag=!0,null!=localStorage&&!0===localStorage.hasOwnProperty("cart")&&(t=JSON.parse(localStorage.cart),t.filter(function(t){return t.id_code==e}).length>0&&(addflag=!1)),1==addflag&&(t.push({id_code:e,qty:1}),localStorage.cart=JSON.stringify(t),this.saveCart())},removefromcart:function(e){var t=JSON.parse(localStorage.cart);t.splice(t.indexOf(t.filter(function(t){return t.id_code==e})[0]),1),localStorage.cart=JSON.stringify(t),this.saveCart()},changeqty:function(e,t){var a=JSON.parse(localStorage.cart);a[a.indexOf(a.filter(function(t){return t.id_code==e})[0])].qty=parseInt(t),localStorage.cart=JSON.stringify(a),this.saveCart()},loadcart:function(e){localStorage.cart=localStorage.cart.replace(/"id"/g,'"id_code"');JSON.parse(localStorage.cart);!1===localStorage.hasOwnProperty("pincode")&&(localStorage.pincode=""),$(".cartOverlay").addClass("showCartLoader");var t="",a="";void 0!==window.__PersonalData__&&(t=JSON.stringify(window.__PersonalData__)),void 0!==window.__CouponCode__&&(a=window.__CouponCode__),$.ajax({url:window.location.protocol+"//"+window.location.host+"/cart/loadcart",type:"POST",data:{cart:localStorage.cart,pincode:localStorage.pincode,personaldata:t,couponcode:a},success:function(e){cartstore.dispatch({type:"loadcart",data:JSON.parse(e)}),$(".cartOverlay").removeClass("showCartLoader")},error:function(e){$(".cartOverlay").removeClass("showCartLoader")}}),0!=e&&$("[data-remodal-id=modal]").remodal().open()},saveCart:function(){"True"==window.__LOGGED_IN__&&$.ajax({url:window.location.protocol+"//"+window.location.host+"/cart/updatecart",type:"POST",data:{cart_items:localStorage.cart},success:function(e){},error:function(e){}})}},ShoppingCartButton=React.createClass({displayName:"ShoppingCartButton",mixins:[cartmixin],getInitialState:function(){return{loaded:0}},clickCartButton:function(){this.loadcart(!0)},componentDidMount:function(){this.setState({loaded:1})},render:function(){return React.createElement("i",{className:"spriteHealthmug",onClick:this.clickCartButton},1==this.state.loaded?this.props.data:0)}}),MobileShoppingCartButton=React.createClass({displayName:"MobileShoppingCartButton",mixins:[cartmixin],clickCartButton:function(){this.loadcart(!0)},render:function(){return React.createElement("span",{onClick:this.clickCartButton,className:"mCartTop openCart"},React.createElement("svg",null,React.createElement("use",{xlinkHref:"/css/svgsprite.svg#cart-icon"})),React.createElement("span",{className:"mCartTopCount"},this.props.data))}}),ShoppingCart=React.createClass({displayName:"ShoppingCart",mixins:[cartmixin],componentDidMount:function(){this.loadcart(!1)},render:function(){return React.createElement("div",{className:"shoppingCart"},React.createElement(CartHeader,{itemcount:this.props.data.cartitems.length}),React.createElement(CartBody,{data:this.props.data.cartitems,page:"cart"}),React.createElement(CartFooter,{data:this.props.data.cartcalculation}),React.createElement(CartOverlay,null))}}),CartOverlay=React.createClass({displayName:"CartOverlay",render:function(){return React.createElement("div",{className:"cartOverlay"},React.createElement("div",{className:"cartLoader"},React.createElement("div",{className:"circleLoader"},React.createElement("div",null,React.createElement("div",null,React.createElement("svg",null,React.createElement("use",{xlinkHref:"/css/svgsprite.svg#loader"}))))),React.createElement("p",null,"Updating Cart")))}}),CartHeader=React.createClass({displayName:"CartHeader",render:function(){return React.createElement("div",{className:"container"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12 cartTitle"},React.createElement("h2",null,"Shopping Cart"," ",React.createElement("span",null,"(",this.props.itemcount," ",this.props.itemcount>1?"Items":"Item",")")))),React.createElement("div",{className:"row cartHead"},React.createElement("div",{className:"col-xs-12 col-sm-4 cartItemCol"},"Item"),React.createElement("div",{className:"col-xs-12 col-sm-1"},"Quantity"),React.createElement("div",{className:"col-xs-12 col-sm-2"},"Price"),React.createElement("div",{className:"col-xs-12 col-sm-3"}),React.createElement("div",{className:"col-xs-12 col-sm-2 cartItemTotalCol"},"Sub Total")))}}),CartBody=React.createClass({displayName:"CartBody",mixins:[cartmixin],getInitialState:function(){return{mobileheight:0,showpincode:!1,showpincodeerror:!1,errorvalue:"Please enter a valid pincode"}},componentDidMount:function(){var e="",t=0,a=!1;!0===localStorage.hasOwnProperty("pincode")&&(e=localStorage.pincode),""!=e&&(a=!0),window.matchMedia("(max-width: 768px)").matches&&(t=window.innerHeight-219),this.setState({mobileheight:t,pincode:e,showpincode:a})},removeCart:function(e){this.removefromcart(e),this.loadcart(!1)},qtyChange:function(e,t){this.changeqty(e,t.target.value),this.loadcart(!1)},optionvalues:function(e){var t=[];if(e>0)for(var a=1;a<=e;a++)t.push(React.createElement("option",{value:a,key:a},a));else t.push(React.createElement("option",{value:"0"},"0"));return t},cartBodyStyle:function(){return style={},this.state.mobileheight>0&&(this.props.data.length>0?style={height:this.state.mobileheight}:style={height:this.state.mobileheight+219}),style},changePincode:function(){if(this.refs.txtpincode.value.length<6||this.refs.txtpincode.value.length>6)this.setState({showpincodeerror:!0});else{var e=this;$.ajax({url:window.location.protocol+"//"+window.location.host+"/cart/changepincode",type:"POST",data:{cart:localStorage.cart,pincode:e.refs.txtpincode.value},success:function(t){cartstore.dispatch({type:"updatepincode",data:JSON.parse(t),pincode:e.refs.txtpincode.value}),e.setState({pincode:localStorage.pincode,showpincode:!0,showpincodeerror:!1})},error:function(t){e.setState({showpincodeerror:!0,errorvalue:t.responseText})}})}},hidePincodeError:function(){this.setState({showpincodeerror:!1})},showPincode:function(){this.setState({showpincode:!1})},checkEnter:function(e){13==e.keyCode&&this.changePincode()},render:function(){var e=this;return React.createElement("div",{className:"container cartBody",style:this.cartBodyStyle()},this.props.data.length>0?React.createElement("div",null,React.createElement("div",{className:"cartPinWrap"},React.createElement("div",{className:"cartPin"},React.createElement("div",{className:"pinCodeForm",style:1==this.state.showpincode?{display:"none"}:{}},React.createElement("span",null,"Check for Delivery"),React.createElement("div",{className:1==this.state.showpincodeerror?"pinTextBox active":"pinTextBox"},React.createElement("input",{type:"number",className:"form-control",placeholder:"Pincode",ref:"txtpincode",onFocus:this.hidePincodeError,onKeyUp:this.checkEnter}),React.createElement("div",{className:"pinCodeErrorTooltip"},React.createElement("p",null,this.state.errorvalue))),React.createElement("button",{onClick:this.changePincode},"Check")),React.createElement("h4",{style:1==this.state.showpincode?{display:"block"}:{}},React.createElement("span",null,"Showing availability at")," ",React.createElement("span",null,this.state.pincode)," ",React.createElement("a",{onClick:this.showPincode},"Change")))),this.props.data.some(function(e){return 1==e.prescription_required})?React.createElement("div",{className:"prescriptionRequiredNote"},"Some item(s) in your cart require prescription",React.createElement("div",{className:"rxWrap"},React.createElement("svg",null,React.createElement("use",{xlinkHref:"/css/svgsprite.svg#rx"})))):null,this.props.data.map(function(t,a){return React.createElement("div",{className:t.stock>0?"row cart":"row cart disableCartRow",key:a},React.createElement("div",{className:"col-xs-12 col-sm-4 cartItemCol"},React.createElement("a",{href:t.url,className:"cartItemImg"},React.createElement("img",{src:"https://static.oxinis.com/healthmug/image/product/"+t.image+"-80.jpg",width:"70px",height:"70px"}),t.prescription_required?React.createElement("div",{className:"rxWrap"},React.createElement("svg",null,React.createElement("use",{xlinkHref:"/css/svgsprite.svg#rx"}))):null),React.createElement("div",{className:"cartItemDesc"},React.createElement("h3",null,t.name),t.brand?React.createElement("p",{className:"cartItemBrand"},t.brand):null,t.stock<6&&t.stock>0?React.createElement("p",null,React.createElement("span",null,"Only ",t.stock," items left in stock")):null!=t.product_error?React.createElement("p",null,React.createElement("span",null,t.product_error)):null),React.createElement("div",{className:"clearfix"})),React.createElement("div",{className:"col-xs-6 col-xs-push-6 col-sm-1"},React.createElement("select",{value:t.qty,id:t.id_code,onChange:e.qtyChange.bind(e,t.id_code)},e.optionvalues(t.stock))),React.createElement("div",{className:"col-xs-6 col-xs-pull-6 col-sm-2"},React.createElement("div",{className:"cartItemPrice"},React.createElement("i",{className:"fa fa-rupee"})," ",t.price)),React.createElement("div",{className:"col-xs-12 col-sm-3 cartDelivery"},t.stock>0?React.createElement("div",null,React.createElement("span",null,"-1"==t.estimated_delivery_date?"Enter your pincode to get delivery time":"Product will be delivered within "+t.estimated_delivery_date+" business days"),t.no_cod?React.createElement("div",null,React.createElement("span",{className:"codNotApplicable"},"COD not applicable")):null):React.createElement("span",{className:"brandtextDanger"},React.createElement("b",null,"Sold Out"))),React.createElement("div",{className:"col-xs-12 col-sm-2 subTotal cartItemTotalCol"},t.stock>0?React.createElement("div",{className:"cartItemPrice"},React.createElement("i",{className:"fa fa-rupee"})," ",t.sub_total," ",React.createElement("a",{className:"removeCartBt",onClick:e.removeCart.bind(e,t.id_code)})):React.createElement("div",{className:"cartItemPrice"},React.createElement("i",{className:"fa fa-rupee"})," 0 ",React.createElement("a",{className:"removeCartBt",onClick:e.removeCart.bind(e,t.id_code)}))))})):React.createElement("div",{className:"emptyCart"},React.createElement("div",{className:"emptyCartMsg"},React.createElement("img",{src:"https://static.oxinis.com/healthmug/image/healthmug/cart.jpg"}),React.createElement("h2",null,"Your Cart is Empty"),React.createElement("p",null,"Add Some Stuff!"),"checkout"==this.props.page?null:React.createElement("button",{className:"btn btn-healthmug size-lg","data-remodal-action":"close"},"Continue Shopping"))))}}),CartFooter=React.createClass({displayName:"CartFooter",mixins:[cartmixin],render:function(){var e=this.props.data.total,t=this.props.data.add_discount,a=this.props.data.shipping;return React.createElement("div",{className:"container cartFooter"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12 col-sm-7 "},React.createElement("div",{className:"cartPaymentSecurity"},React.createElement("div",null,React.createElement("span",{className:"spriteHealthmug safeBuyImg"}),React.createElement("p",null,React.createElement("b",null,"Safe Buy:")," 100% Money Back Guarantee")),React.createElement("div",null,React.createElement("span",{className:"spriteHealthmug returnImg"}),React.createElement("p",null,React.createElement("b",null,"Live Easy:")," 15 Days Easy Return Policy")),React.createElement("div",null,React.createElement("span",{className:"spriteHealthmug moneyBackImg"}),React.createElement("p",null,React.createElement("b",null,"Top Notch:")," Genuine Products Guarantee")))),e>0?React.createElement("div",{className:"col-xs-12 col-sm-5"},React.createElement("div",{className:"cartCharges"},React.createElement("label",{className:"cartLabel"},"Total:"),React.createElement("span",null,React.createElement("i",{className:"fa fa-rupee"})," "+e)),t>0?React.createElement("div",{className:"cartCharges"},React.createElement("label",{className:"cartLabel"},"Additional Discount:"),React.createElement("span",null,"- ",React.createElement("i",{className:"fa fa-rupee"})," ",t)):null,React.createElement("div",{className:"cartCharges"},React.createElement("label",{className:"cartLabel"},"Delivery Charge:"),0==a?React.createElement("span",{className:"deliveryCharge"},"Free"):React.createElement("span",null,React.createElement("i",{className:"fa fa-rupee"})," "+a)),React.createElement("div",{className:"cartCharges totalAmount"},React.createElement("label",{className:"cartLabel"},"Grand Total:"),React.createElement("span",null,React.createElement("i",{className:"fa fa-rupee"})," "+this.props.data.grand_total)),""!=this.props.data.additional_info?React.createElement("p",{className:"getFreeDeliver"},this.props.data.additional_info):null):null),e>0?React.createElement("div",{className:"row cartButton"},React.createElement("div",{className:"col-xs-12"},React.createElement("button",{className:"btn btn-default size-lg","data-remodal-action":"close"},"Continue Shopping")," ",React.createElement("button",{className:"btn size-lg btn-healthmug",onClick:this.redirecttocheckout.bind(this,0)},"Place Order ",React.createElement("i",{className:"fa fa-chevron-right cartbuttonanimate"})))):null)}});
//# sourceMappingURL=../jsx-js-maps/cart.js.map
